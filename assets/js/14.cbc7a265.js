(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{374:function(a,s,t){"use strict";t.r(s);var e=t(45),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"rap2环境搭建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rap2环境搭建"}},[a._v("#")]),a._v(" RAP2环境搭建")]),a._v(" "),t("h2",{attrs:{id:"node"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#node"}},[a._v("#")]),a._v(" Node")]),a._v(" "),t("p",[a._v("直接安装linux版本的node "),t("code",[a._v("https://nodejs.org/dist/v10.16.0/node-v10.16.0-linux-x64.tar.gz")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" -xvf node-v10.16.0-linux-x64.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" node-v10.16.0-linux-x64.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" -r lib/node_modules /usr/local/lib\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" bin/node /usr/local/bin/\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /usr/local/bin/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ln")]),a._v(" -s "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/lib/node_modules/npm/bin/npm-cli.js "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ln")]),a._v(" -s "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/lib/node_modules/npm/bin/npx-cli.js npx\n")])])]),t("h2",{attrs:{id:"mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql"}},[a._v("#")]),a._v(" mysql")]),a._v(" "),t("h3",{attrs:{id:"下载mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载mysql"}},[a._v("#")]),a._v(" 下载mysql")]),a._v(" "),t("p",[t("code",[a._v("https://downloads.mysql.com/archives/community")])]),a._v(" "),t("p",[t("img",{attrs:{src:"/imgs/pages/rap-2.png",alt:"image"}})]),a._v(" "),t("h3",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),t("p",[a._v("主要安装4个包")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("mysql-community-common-5.7.28-1.el7.x86_64.rpm\nmysql-community-libs-5.7.28-1.el7.x86_64.rpm\nmysql-community-client-5.7.28-1.el7.x86_64.rpm\nmysql-community-server-5.7.28-1.el7.x86_64.rpm\n")])])]),t("p",[a._v("各个包有依赖关系需要顺序安装")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("rpm -ivh mysql-community-common-5.7.28-1.el7.x86_64.rpm\nrpm -ivh mysql-community-libs-5.7.28-1.el7.x86_64.rpm\nrpm -ivh mysql-community-client-5.7.28-1.el7.x86_64.rpm\nrpm -ivh mysql-community-server-5.7.28-1.el7.x86_64.rpm\n")])])]),t("h3",{attrs:{id:"相关命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#相关命令"}},[a._v("#")]),a._v(" 相关命令")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("systemctl start mysqld.service\nsystemctl stop mysqld.service\nsystemctl restart mysqld.service\n")])])]),t("h3",{attrs:{id:"修改密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改密码"}},[a._v("#")]),a._v(" 修改密码")]),a._v(" "),t("h4",{attrs:{id:"初始密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#初始密码"}},[a._v("#")]),a._v(" 初始密码")]),a._v(" "),t("p",[a._v("MySQL第一次启动后会创建超级管理员账号root@localhost，初始密码储存在日志文件中")]),a._v(" "),t("p",[t("code",[a._v("grep 'temporary password' /var/log/mysqld.log")])]),a._v(" "),t("h4",{attrs:{id:"修改默认密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改默认密码"}},[a._v("#")]),a._v(" 修改默认密码")]),a._v(" "),t("p",[a._v("修改配置文件"),t("code",[a._v("/etc/my.cnf")]),a._v("，添加"),t("code",[a._v("validate_password=OFF")]),a._v("，保存并重启MySQL")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("mysql -uroot -p\n\nmysql> ALTER USER 'root'@'localhost' IDENTIFIED BY '123456';\nERROR 1819 (HY000): Your password does not satisfy the current policy requirements\n")])])]),t("h4",{attrs:{id:"增加通过ip访问的mysql用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#增加通过ip访问的mysql用户"}},[a._v("#")]),a._v(" 增加通过ip访问的mysql用户")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("mysql> grant all on *.* to admin@'%' identified by '123456' with grant option;\nmysql> flush privileges;\n# 查看用户\nmysql> SELECT User, Host FROM mysql.user;\n")])])]),t("p",[a._v("访问"),t("code",[a._v("mysql -P 3306 -h 127.0.0.1 -u admin -p")])]),a._v(" "),t("h4",{attrs:{id:"修改mysql端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改mysql端口"}},[a._v("#")]),a._v(" 修改mysql端口")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("vim /etc/my.cnf\nport=3506\n")])])]),t("h2",{attrs:{id:"redis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis"}},[a._v("#")]),a._v(" redis")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("下载")]),a._v(" "),t("p",[t("code",[a._v("https://redis.io/download")])])]),a._v(" "),t("li",[t("p",[a._v("安装编译依赖")]),a._v(" "),t("p",[t("code",[a._v("yum install -y gcc make gcc-c++ openssl-devel")])])]),a._v(" "),t("li",[t("p",[a._v("编译")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("cd redis-5.0.7/\nmake\n")])])])]),a._v(" "),t("li",[t("p",[a._v("安装")]),a._v(" "),t("p",[t("code",[a._v("make install")])])]),a._v(" "),t("li",[t("p",[a._v("启动")]),a._v(" "),t("p",[t("code",[a._v("redis-server")])])])]),a._v(" "),t("h2",{attrs:{id:"pandoc"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pandoc"}},[a._v("#")]),a._v(" Pandoc")]),a._v(" "),t("p",[a._v("安装")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("mv pandoc-2.7.3 pandoc\ncp -r pandoc /usr/local/\ncd /usr/local/bin/\nln -s ../pandoc/bin/pandoc pandoc\nln -s ../pandoc/bin/pandoc-citeporc pandoc-citeporc\n")])])]),t("h2",{attrs:{id:"node相关依赖项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#node相关依赖项目"}},[a._v("#")]),a._v(" node相关依赖项目")]),a._v(" "),t("h3",{attrs:{id:"离线安装方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#离线安装方式"}},[a._v("#")]),a._v(" 离线安装方式")]),a._v(" "),t("p",[a._v("在联网环境上通过"),t("code",[a._v("npm i -g {node_module_name}")]),a._v("的方式进行全局安装；\n在联合环境的全局node_modules目录下找到组件，进行压缩，传送到离线环境；\n拷贝组件到"),t("code",[a._v("/usr/local/lib/node_modules/")]),a._v("目录下，使用"),t("code",[a._v("npm build -g {node_modules_name}")]),a._v("进行安装")]),a._v(" "),t("h3",{attrs:{id:"组件列表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#组件列表"}},[a._v("#")]),a._v(" 组件列表")]),a._v(" "),t("p",[a._v("pm2, rimraf, tslint, typescript")]),a._v(" "),t("h2",{attrs:{id:"rap2-delos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rap2-delos"}},[a._v("#")]),a._v(" rap2-delos")]),a._v(" "),t("h3",{attrs:{id:"修改配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改配置"}},[a._v("#")]),a._v(" 修改配置")]),a._v(" "),t("p",[t("code",[a._v("src/config/config.prod.ts")])]),a._v(" "),t("h3",{attrs:{id:"编译"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编译"}},[a._v("#")]),a._v(" 编译")]),a._v(" "),t("p",[t("code",[a._v("npm run build")])]),a._v(" "),t("h3",{attrs:{id:"启动redis-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动redis-server"}},[a._v("#")]),a._v(" 启动redis-server")]),a._v(" "),t("p",[t("code",[a._v("npm run start:redis")])]),a._v(" "),t("h3",{attrs:{id:"初始化数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#初始化数据库"}},[a._v("#")]),a._v(" 初始化数据库 "),t("Badge",{attrs:{text:"如果已有数据会丢失",type:"error"}})],1),a._v(" "),t("p",[a._v("需要修改dev配置，build之后执行")]),a._v(" "),t("p",[t("code",[a._v("npm run create-db")])]),a._v(" "),t("h3",{attrs:{id:"运行服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#运行服务"}},[a._v("#")]),a._v(" 运行服务")]),a._v(" "),t("p",[a._v("使用prod配置")]),a._v(" "),t("p",[t("code",[a._v("npm start")])]),a._v(" "),t("h2",{attrs:{id:"rap2-dolores"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rap2-dolores"}},[a._v("#")]),a._v(" rap2-dolores")]),a._v(" "),t("h3",{attrs:{id:"修改配置-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改配置-2"}},[a._v("#")]),a._v(" 修改配置")]),a._v(" "),t("p",[t("code",[a._v("vim src/config/config.prod.ts")])]),a._v(" "),t("h3",{attrs:{id:"编译-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编译-2"}},[a._v("#")]),a._v(" 编译")]),a._v(" "),t("p",[t("code",[a._v("npm run build")])]),a._v(" "),t("h2",{attrs:{id:"nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[a._v("#")]),a._v(" Nginx")]),a._v(" "),t("h3",{attrs:{id:"下载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载"}},[a._v("#")]),a._v(" 下载")]),a._v(" "),t("p",[t("code",[a._v("http://nginx.org/download/nginx-1.15.0.tar.gz")])]),a._v(" "),t("h3",{attrs:{id:"依赖安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#依赖安装"}},[a._v("#")]),a._v(" 依赖安装")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("yum -y install openssl openssl-devel\nyum -y install pcre pcre-devel\nyum -y install zlib zlib-devel\n")])])]),t("h2",{attrs:{id:"安装nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装nginx"}},[a._v("#")]),a._v(" 安装nginx")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("tar -zxvf nginx-1.15.0.tar.gz\ncd nginx-1.15.0\n./configure && make && make install\n")])])]),t("h3",{attrs:{id:"配置nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置nginx"}},[a._v("#")]),a._v(" 配置nginx")]),a._v(" "),t("p",[t("code",[a._v("vim /usr/local/nginx/conf/nginx.conf")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("server {\n  listen  80;\n  server_name localhost;\n  location / {\n    root /home/rap2-dolores-master/build/;\n    try_files $uri $uri @router;\n  }\n\n  location @router {\n    rewrite ^.*$  /index.html last;\n  }\n}\n")])])]),t("h3",{attrs:{id:"nginx常用相关命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx常用相关命令"}},[a._v("#")]),a._v(" nginx常用相关命令")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("./nginx\n./nginx -t\n./nginx -s reload\ntailf /usr/local/nginx/logs/access.log\n")])])]),t("h2",{attrs:{id:"主机重启后启动rap2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#主机重启后启动rap2"}},[a._v("#")]),a._v(" 主机重启后启动RAP2")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("cd /home/RAP2/rap2-delos/\nnpm run start:redis\nnpm start\ncd /usr/local/nginx/sbin/\n./nginx\n")])])]),t("h2",{attrs:{id:"设置开机启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置开机启动"}},[a._v("#")]),a._v(" 设置开机启动")]),a._v(" "),t("h3",{attrs:{id:"通过mp2-管理rap-server-delos-和-redis-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过mp2-管理rap-server-delos-和-redis-server"}},[a._v("#")]),a._v(" 通过mp2 管理rap-server-delos 和 redis-server")]),a._v(" "),t("p",[t("code",[a._v("pm2 list")]),a._v("查看服务")]),a._v(" "),t("p",[t("code",[a._v("pm2 save")]),a._v("保存当前进程状态")]),a._v(" "),t("p",[t("code",[a._v("pm2 startup [platform]")]),a._v("生成开机自启动的命令")]),a._v(" "),t("p",[t("code",[a._v("pm2 startup centos")]),a._v("  centos环境生成开机自启动命令")]),a._v(" "),t("p",[t("code",[a._v("pm2 save")]),a._v("保存")]),a._v(" "),t("h3",{attrs:{id:"nginx开机启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx开机启动"}},[a._v("#")]),a._v(" Nginx开机启动")]),a._v(" "),t("p",[a._v("在系统服务目录中创建"),t("code",[a._v("nginx.service")]),a._v("文件")]),a._v(" "),t("p",[t("code",[a._v("vim /lib/systemd/system/nginx.service")])]),a._v(" "),t("p",[a._v("填写内容")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("[Unit]\nDescription=nginx\nAfter=network.target\n\n[Service]\nType=forking\nExecStart=/usr/local/nginx/sbin/nginx\nExecReload=/usr/local/nginx/sbin/nginx -s reload\nExecStop=/usr/local/nginx/sbin/nginx -s quit\nPrivateTemp=true\n\n[Install]\nWantedBy=multi-user.target\n")])])]),t("p",[t("code",[a._v("systemctl daemon-reload")]),a._v("生效配置")]),a._v(" "),t("p",[t("code",[a._v("systemctl enable nginx.service")]),a._v("  nginx开机启动")])])}),[],!1,null,null,null);s.default=r.exports}}]);