(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{377:function(t,a,s){"use strict";s.r(a);var e=s(45),i=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"搭建git服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#搭建git服务"}},[t._v("#")]),t._v(" 搭建git服务")]),t._v(" "),s("ol",[s("li",[t._v("安装git")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sudo apt-get install git\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("创建一个git用户，用来运行git服务")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sudo adduser git\nsudo passwd git\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("创建证书登录")])]),t._v(" "),s("p",[t._v("收集所有需要登录的用户的公钥"),s("code",[t._v("id_rsa.pub")]),t._v("文件，把所有公钥导入到"),s("code",[t._v("/home/git/.ssh/authorized_keys")]),t._v("文件")]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("初始化Git仓库")])]),t._v(" "),s("p",[t._v("选定一个目录作为Git仓库，如："),s("code",[t._v("/git/chromeEx.git")]),t._v("，在"),s("code",[t._v("/git")]),t._v("目录下输入命令")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sudo git init --bare chromeEx.git\n")])])]),s("p",[t._v("修改git仓库的权限为git；")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sudo chown -R git:git chromeEx.git\n")])])]),s("p",[t._v("否则在使用时会出现错误")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Failed with error: sha1 file '<stdout>' write error:\nInvalid argument remote: error: insufficient permission for adding an object to repository \ndatabase ./objects failed to push some refs to 'ssh://git@10.99.201.91:/git/chromeEx.git'\n")])])]),s("ol",{attrs:{start:"5"}},[s("li",[t._v("禁用shell登录")])]),t._v(" "),s("p",[t._v("编辑"),s("code",[t._v("/etc/passwd")]),t._v("文件，找到类似下面的一行：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("git:x:1000:1000:git,git,,:/home/git:/bin/bash\n")])])]),s("p",[t._v("改为")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("git:x:1000:1000:git,git,,:/home/git:/bin/git-shell\n")])])]),s("ol",{attrs:{start:"6"}},[s("li",[t._v("克隆远程仓库")])]),t._v(" "),s("p",[t._v("通过git clone命令进行克隆远程仓库，可以正常使用git")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("git clone ssh://git@10.99.201.91:/git/chromeEx.git\n")])])])])}),[],!1,null,null,null);a.default=i.exports}}]);